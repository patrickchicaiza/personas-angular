<div class="container mx-auto px-4 py-8 max-w-2xl">
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-800">
      {{ isEditMode ? 'Editar Persona' : 'Nueva Persona' }}
    </h1>
    <p class="text-gray-600 mt-2">
      {{ isEditMode ? 'Actualiza los datos de la persona' : 'Completa el formulario para crear una nueva persona' }}
    </p>
  </div>

  <!-- Mensaje de error -->
  @if (errorMessage) {
    <div class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
      {{ errorMessage }}
    </div>
  }

  <!-- Loading al cargar -->
  @if (isLoading && isEditMode) {
    <div class="text-center py-8">
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
      <p class="mt-2 text-gray-600">Cargando datos...</p>
    </div>
  }

  <!-- Formulario -->
  @if (!isLoading || !isEditMode) {
    <form (ngSubmit)="onSubmit()" #personForm="ngForm" class="space-y-6">
      
      <!-- Nombre -->
      <div>
        <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">
          Nombre completo *
        </label>
        <input type="text" 
          id="nombre" 
          name="nombre" 
          [(ngModel)]="person.nombre" 
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"
          placeholder="Ej: Juan Pérez">
        @if (personForm.submitted && !person.nombre) {
          <p class="mt-1 text-sm text-red-600">
            El nombre es requerido
          </p>
        }
      </div>

      <!-- Cédula -->
      <div>
        <label for="cedula" class="block text-sm font-medium text-gray-700 mb-1">
          Cédula *
        </label>
        <input type="text" 
          id="cedula" 
          name="cedula" 
          [(ngModel)]="person.cedula" 
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"
          placeholder="Ej: 1234567890">
        @if (personForm.submitted && !person.cedula) {
          <p class="mt-1 text-sm text-red-600">
            La cédula es requerida
          </p>
        }
      </div>

      <!-- Correo -->
      <div>
        <label for="correo" class="block text-sm font-medium text-gray-700 mb-1">
          Correo electrónico *
        </label>
        <input type="email" 
          id="correo" 
          name="correo" 
          [(ngModel)]="person.correo" 
          required
          email
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"
          placeholder="Ej: ejemplo@correo.com">
        @if (personForm.submitted && !person.correo) {
          <p class="mt-1 text-sm text-red-600">
            El correo es requerido
          </p>
        }
        @if (personForm.submitted && person.correo && !person.correo.includes('@')) {
          <p class="mt-1 text-sm text-red-600">
            Por favor ingresa un correo válido
          </p>
        }
      </div>

      <!-- Botones -->
      <div class="flex space-x-4 pt-4">
        <button type="submit" 
          [disabled]="isLoading"
          class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
          @if (!isLoading) {
            <span>{{ isEditMode ? 'Actualizar' : 'Crear' }}</span>
          }
          @if (isLoading) {
            <span class="flex items-center justify-center">
              <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>
              Guardando...
            </span>
          }
        </button>
        
        <button type="button" 
          (click)="cancel()"
          class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-4 rounded-lg transition duration-200">
          Cancelar
        </button>
      </div>
    </form>
  }
</div>